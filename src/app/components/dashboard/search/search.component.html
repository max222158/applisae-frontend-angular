<div class="container">
  <div class="flex1">

    <div class="" style="width: 300px;">


      <div class="accordion" id="accordionExample">

        <!-- First accordion -->
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              Type
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" (change)="onCheckboxChange($event, 'dossiers')"
                  id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">
                  Dossiers
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value=""
                  (change)="onCheckboxChange($event, 'documents')" id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                  Documents
                </label>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" value=""
                  (change)="onCheckboxChange($event, 'courriers')" id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                  Courriers
                </label>
              </div>

            </div>
          </div>
        </div>

        <!-- Second accordion -->
        <div *ngIf="sectionCourrierVisible" class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              Courriers
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <div class="form-check">
                <input (change)="onCheckboxChange($event, 'courrier_arrive')" class="form-check-input" type="checkbox"
                  value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">
                  Arrivés
                </label>
              </div>
              <div class="form-check">
                <input (change)="onCheckboxChange($event, 'courrier_depart')" class="form-check-input" type="checkbox"
                  value="" id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                  Départs
                </label>
              </div>

              <div class="form-check">
                <input (change)="onCheckboxChange($event, 'courrier_interne')" class="form-check-input" type="checkbox"
                  value="" id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                  Internes
                </label>
              </div>

            </div>
          </div>
        </div>
        <!-- Third accordion -->
        <div *ngIf="sectionExtensionVisible" class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              Format
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <div class="form-check">
                <input (change)="onCheckboxChange($event, 'pdf')" class="form-check-input" type="checkbox" value=""
                  id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">
                  Pdf
                </label>
              </div>
              <div class="form-check">
                <input (change)="onCheckboxChange($event, 'docx')" class="form-check-input" type="checkbox" value=""
                  id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                  Docx
                </label>
              </div>

              <div class="form-check">
                <input (change)="onCheckboxChange($event, 'texte')" class="form-check-input" type="checkbox" value=""
                  id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                  Texte
                </label>
              </div>

              <div class="form-check">
                <input (change)="onCheckboxChange($event, 'excel')" class="form-check-input" type="checkbox" value=""
                  id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                  Excel
                </label>
              </div>

              <div class="form-check">
                <input (change)="onCheckboxChange($event, 'image')" class="form-check-input" type="checkbox" value=""
                  id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                  Image
                </label>
              </div>
              <div class="form-check">
                <input (change)="onCheckboxChange($event, 'powerpoint')" class="form-check-input" type="checkbox"
                  value="" id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                  PowerPoint
                </label>
              </div>

            </div>
          </div>
        </div>
        <!--  Fourth accordion -->
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              Champs personnalisés
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <button (click)="setVisibleCustomerFields()" class="btn btn-success">Ajouter des champs</button>
              <div *ngIf="visibleCustomerFields" style="">

                <app-customer-fields-dropdown></app-customer-fields-dropdown>
              </div>
            </div>
          </div>
        </div>
        <!-- Fifth accordion  -->
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              Par modèles
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
            <div class="accordion-body">

            </div>
          </div>
        </div>

        <!-- Par Date -->
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              Par date
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <div class="mb-3 div-search-ad">
                <label for="exampleFormControlInput1" class="form-label">De: </label>
                <input class="form-control" type="date" name="" id="">
              </div>
              <div class="mb-3 div-search-ad">
                <label for="exampleFormControlInput1" class="form-label">À: </label>
                <input class="form-control" type="date" name="" id="">
              </div>

            </div>
          </div>
        </div>

        <!-- Par Créateur -->
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              Producteurs
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
            <div class="accordion-body">


            </div>
          </div>
        </div>


        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              Acteurs
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
            <div class="accordion-body">


            </div>
          </div>
        </div>
      </div>


    </div>

    <!-- Search bar -->

    <div style="width:calc(100% - 380px)">

      <div class="card" style="max-width: 766px; width:100%; padding: 20px; margin-bottom: 5px; margin-left:30px">

        <div class="flex1 ">
          <input type="text" [(ngModel)]="searchValue" class="form-control input-search"
            placeholder="Chercher un mot clé ou un identifiant"
            style="width: 100%; margin-top: 10px; margin-right: 10px;" />

          <button (click)="onSearch(1)" class="btn btn-success" style="margin-top: 10px;">Recherche</button>
        </div>


        <h5 class="mt-3">Les résultats de la recherche: </h5>

        <!-- Loader -->
        <ngx-skeleton-loader appearance="line" count="10" [theme]="{ height: '40px' }" *ngIf="isLoading">
        </ngx-skeleton-loader>

        <div class="" *ngIf="!isLoading">
          <div>
            <div style="width: 100%;" class="row">
              <table class="table table-hover" style="margin-bottom: 0px;">

                <tbody>
                  <tr
                    *ngFor="let folderFile of foldersFiles | paginate: { itemsPerPage: perPage, currentPage: page, totalItems: totalItems}; let i = index"
                    style="cursor: pointer;">

                    

                    <!-- icone dossier ou document ou courrier si le resultat est un des 3  -->

                    <th scope="row" *ngIf="folderFile.type == 'folder'" style="vertical-align: middle; width: 50px">
                      <i class="fa-solid fa-folder"
                        style="font-size: 25px; color: rgb(252, 163, 68) !important; padding-top: 5px;"></i>
                    </th>

                    <th *ngIf="folderFile.type == 'document'" scope="row" style="vertical-align: middle; ; width: 50px">

                      <i [class]="getIconName(folderFile.extension)" style="font-size: 25px;"
                        [ngStyle]="{ color: getColor(folderFile.extension) }"></i>
                    </th>
                    <th scope="row" *ngIf="folderFile.type == 'courrier'" style="vertical-align: middle; width: 50px">
                      <i class="fa-solid fa-envelope"
                        style="font-size: 25px; color: rgb(137, 212, 255) !important; padding-top: 5px;"></i>
                    </th>

                  <!-- nom title subject -->
                    <td *ngIf="folderFile.type == 'folder'"
                      style="word-break: break-word; font-size: 16px; vertical-align: middle;"
                      (click)="openFolderById(folderFile.id, folderFile.name,page)">
                      <p class="type-resultat" *ngIf="folderFile.type == 'folder'" >Dossier</p>
                      <p class="mb-0">{{ folderFile.name }}</p>
                    </td>
                    

                    <td *ngIf="folderFile.type == 'courrier'"
                    style="word-break: break-word; font-size: 16px; vertical-align: middle;"
                    (click)="openFolderById(folderFile.id, folderFile.name,page)">
                    <p class="type-resultat" *ngIf="folderFile.type == 'courrier'" >Courrier</p>
                    <p class="mb-0">{{ folderFile.subject }}</p>
                  </td>

                    <td *ngIf="folderFile.type == 'document'"
                      style="word-break: break-word; font-size: 16px; vertical-align: middle;"
                      (click)="gotoDetailsDocument(folderFile.id)">
                      <p class="type-resultat" *ngIf="folderFile.type == 'document'" >Document</p>
                      <p class="mb-0">{{ folderFile.title }}</p>
                    </td>

                    <!-- taille -->
                    <td *ngIf="folderFile.type == 'folder'"></td>
                    <td *ngIf="folderFile.type == 'document'">{{folderFile.size | byteConverter }}</td>
                    <td *ngIf="folderFile.type == 'courrier'"></td>

                    <!-- nom du user  -->


                    <td *ngIf="folderFile.type == 'folder'">{{ folderFile?.user?.name || '' }}</td>
                    <td *ngIf="folderFile.type == 'document'">{{ folderFile?.user?.name }}</td>
                    <td *ngIf="folderFile.type == 'courrier'">{{ folderFile?.user?.name }}</td>

                    <!-- date -->
                    <td>{{ folderFile.created_at | customDateFormat }}</td>




                  </tr>

                </tbody>
              </table>
              

              <div class="col-12 mt-4">
                <div class="row">
                  <div class="col-5">
                    Total: {{totalItems}} Résultats
                  </div>
                  <div class="col-5">
                    <pagination-controls (pageChange)="pageChanged($event)" previousLabel="Précédent"
                      nextLabel="Suivant"></pagination-controls>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>
    </div>

  </div>







</div>